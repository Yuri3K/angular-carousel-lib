<div
  class="ngx-carousel"
  tabindex="0"
  role="region"
  [attr.aria-live]="state.autoplay() ? 'off' : 'polite'"
  aria-roledescription="carousel"
  aria-live="polite"
  (keydown.arrowRight)="carousel.next()"
  (keydown.arrowLeft)="carousel.prev()"
  (mouseleave)="autoplay.resume()"
  (mouseover)="autoplay.pause()"
  (focusin)="autoplay.pause()"
  (focusout)="autoplay.resume()"
>
  <ul
    #carouselList
    role="listbox"
    class="ngx-carousel__list"
    [class.no-transition]="carousel.disableTransition()"
    [class.grabbing]="swipe.isSwiping()"
    [style.transform]="layout.translatePx()"
    [style.transition]="
      state.mode() == 'non-stop'
        ? 'none'
        : `transform ${state.speed()}ms ${state.easing()}`
    "
    (pointerdown)="swipe.onPointerDown($event)"
    (pointermove)="swipe.onPointerMove($event)"
    (pointerup)="swipe.onPointerUp($event)"
    (pointercancel)="swipe.onPointerUp($event)"
    (pointerleave)="swipe.onPointerUp($event)"
  >
    @for(slideData of state.slidesWithClones(); track $index; let i = $index) {
      <li
        role="option"
        aria-roledescription="slide"
        class="ngx-carousel__slide"
        [class.no-interaction]="state.mode() == 'non-stop'"
        [class.active]="i === state.currentSlide()"
        [style.width]="layout.slideWidthPx() + 'px'"
        [style.marginRight.px]="state.space()"
      >
        <ng-container 
          [ngTemplateOutlet]="slideTemplate"
          [ngTemplateOutletContext]="{ $implicit: slideData, index: i }"
        ></ng-container>
      </li>
    } 
  </ul>

  @if(controlsTemplate) {
    <ng-container 
      [ngTemplateOutlet]="controlsTemplate"
      [ngTemplateOutletContext]="{$implicit: carousel}"
    />
  } @else {
    <lib-ngx-carousel-controls 
      [iconLeft]="iconLeft"
      [iconRight]="iconRight"
      [btnLeft]="btnLeft"
      [btnRight]="btnRight"
    />
  }
</div>
